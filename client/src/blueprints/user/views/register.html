<div class="view-animate"
     layout="column"
     layout-margin
     layout-padding
     flex>
  <div layout="row"
       layout-align-gt-sm="center center"
       flex="{{checked?'none':''}}">
    <section flex-gt-sm="60"
             flex>
      <!-- section header -->
      <header>
        <h1 class="md-display-1">
          {{_('Free Register')}}
        </h1>
      </header>

      <!-- captcha -->
      <form name="check_form"
            layout="column"
            ng-show="!checked"
            ng-submit="check()"
            novalidate>

        <md-input-container>
          <label>{{_('Email for Account')}}</label>
          <input name="login"
                 type="email"
                 ng-model="reg.login"
                 ng-disiabled="checked"
                 required />
          <ng-messages ng-if="check_form.login.$touched"
                       for="check_form.login.$error">
            <ng-message when="email">
              {{ _('Must be an email address.') }}
            </ng-message>
            <ng-message when="required">
              {{ _('This is required.') }}
            </ng-message>
          </ng-messages>
        </md-input-container>

        <div layout="column"
             layout-gt-xs="row"
             layout-align-gt-xs="center center">

          <md-button class="btn md-raised md-accent"
                     ng-disabled="submitted"
                     type="submit">
            {{_('Check')}}
          </md-button>
          <span class="md-padding" flex></span>
          <md-button class="btn"
                     ng-disabled="submitted"
                     ng-href="/#/login">
            {{_('Go back to Login')}}
          </md-button>

        </div>

      </form>

      <!-- register -->
      <form name="reg_form"
            layout="column"
            ng-show="checked"
            ng-submit="register()"
            novalidate>
        <div>
          <h3>
            {{_('%s is available.', reg.login)}}
          </h3>
          <p>
            {{_('A Register code has been sent to the email.')}}
          </p>
        </div>

        <div layout="column"
             layout-gt-xs="row">

          <md-input-container flex>
            <label>{{_('Enter the Register captcha')}}</label>
            <input name="captcha"
                   type="text"
                   ng-model="reg.captcha"
                   required/>
            <ng-messages ng-if="reg_form.captcha.$touched"
                         for="reg_form.captcha.$error">
              <ng-message when="required">
                {{ _('This is required.') }}
              </ng-message>
            </ng-messages>
          </md-input-container>

          <md-input-container flex>
            <md-button class="btn"
                       ng-disabled="submitted"
                       ng-click="captcha()"
                       type="button">
              {{_('Get Captcha Again')}}
            </md-button>
          </md-input-container>

        </div>

        <md-input-container>
          <label>{{_('User name')}}</label>
          <input name="slug"
                 type="text"
                 ng-model="reg.slug"
                 ng-pattern="input_pattern.slug"
                 maxlength="50"
                 required/>
          <ng-messages ng-if="reg_form.slug.$touched"
                       for="reg_form.slug.$error">
            <ng-message when="required">
              {{ _('This is required.') }}
            </ng-message>
            <ng-message when="pattern">
              {{ _('It is invalid.') }}
            </ng-message>
          </ng-messages>

        </md-input-container>

        <div layout="column"
             layout-gt-xs="row">
          <md-input-container flex>
            <label>{{_('New Password')}}</label>
            <input name="passwd"
                   type="password"
                   ng-model="reg.passwd"
                   maxlength="50"
                   ng-pattern="input_pattern.passwd"
                   required/>
            <ng-messages ng-if="reg_form.passwd.$touched"
                         for="reg_form.passwd.$error">
              <ng-message when="required">
                {{ _('This is required.') }}
              </ng-message>
              <ng-message when="pattern">
                {{ _('It is invalid.') }}
              </ng-message>
            </ng-messages>
          </md-input-container>
          <md-input-container flex>
            <label>{{_('Confirm Password')}}</label>
            <input name="passwd2"
                   type="password"
                   maxlength="50"
                   ng-model="reg.passwd2"
                   password-verify='reg.passwd'
                   required/>
            <ng-messages ng-if="reg_form.passwd2.$touched"
                         for="reg_form.passwd2.$error">
              <ng-message when="required">
                {{ _('This is required.') }}
              </ng-message>
              <ng-message when="passwordVerify">
                {{ _('The password confirmation does not match.') }}
              </ng-message>
            </ng-messages>
          </md-input-container>
        </div>

        <div layout="column"
             layout-gt-xs="row"
             layout-align-gt-xs="center center">

          <md-button class="btn md-raised md-accent"
                     ng-disabled="submitted"
                     type="submit">
            {{_('Register')}}
          </md-button>

          <span class="md-padding" flex></span>

          <md-button class="btn"
                     ng-disabled="submitted"
                     ng-href="/#/login">
            {{_('Go back to Login')}}
          </md-button>


        </div>

      </form>
    </section>
  </div>
</div>